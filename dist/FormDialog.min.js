/*! FormDialog 29-07-2015 */
var FormDialog={};!function(a){FormDialog=function(a){a?this._config=a:this._config={},this._dialog=null,this._title=null,this._fields=null,this._accept_label=null,this._dialogs={},this._field_types={},this._setup()},FormDialog.prototype={_setup:function(){this._config.hasOwnProperty("disableDefaults")&&this._config.disableDefaults!==!1||this._registerDefaultTypes(),this._dialog=this._createDialog()},registerType:function(a){this._field_types[a.id]=a},registerDialog:function(a,b){this._dialogs.hasOwnProperty(a)&&null!=this._dialogs[a]&&this._dialogs[a].remove(),this._dialogs[a]=b},unregisterDialog:function(a){return this._dialogs.hasOwnProperty(a)?(this._dialogs[a]=null,delete this._dialogs[a],!0):!1},show:function(b){if(!this._dialogs.hasOwnProperty(b)||null==this._dialogs[b])return!1;this._updateDialog(this._dialogs[b]);var c=this;return this._accept_label.off("click tap"),this._accept_label.on("click tap",function(){a(document).trigger("formdialog:"+b+":submit",[c.serializeForm()]),c.hide(b)}),this._dialog.modal("show"),!0},hide:function(a){return this._dialogs.hasOwnProperty(a)&&null!=this._dialogs[a]?(this._dialog.modal("hide"),!0):!1},serializeForm:function(a){return this._dialog.find("form").serializeArray()},_registerDefaultTypes:function(){this.registerType(FormDialog.Select),this.registerType(FormDialog.Text),this.registerType(FormDialog.Color),this.registerType(FormDialog.Number),this.registerType(FormDialog.Checkbox)},_updateDialog:function(a){this._fields.html("");for(var b,c=0,d=a.fields.length;d>c;c++){if(b=a.fields[c],!this._field_types.hasOwnProperty(b.type))throw new Error("The data type ["+b.type+"] has not been registered.");this._fields.append(this._field_types[b.type].fieldFactory(b)),this._title.html(a.dialog_title),this._accept_label.html(a.submit_label)}},_createDialog:function(){var b=a('<div class="modal fade"></div>'),c=a('<div class="modal-dialog"></div>'),d=a('<div class="modal-content"></div>'),e=a('<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div>');this._title=a('<h4 class="modal-title"></h4>');var f=a('<div class="modal-body"></div>'),g=a('<div class="modal-footer"></div>');this._accept_label=a('<button type="button" class="btn btn-primary"></button>');var h=a('<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>');return g.append(this._accept_label),g.append(h),this._fields=a('<form class="field"></form>'),f.append(this._fields),e.append(this._title),d.append(e),d.append(f),d.append(g),c.append(d),b.append(c),a(document.body).append(b),b}}}(jQuery),function(a){FormDialog.Checkbox={id:"checkbox",fieldFactory:function(b){var c=a('<div class="checkbox"></div>'),d=a('<label for="'+b.name+'"></label>'),e=a('<input type="checkbox" name="'+b.name+'"/>');return d.append(e),d.append(a("<span>"+b.label+"</span>")),c.append(d),c}}}(jQuery),function(a){FormDialog.Color={id:"color",fieldFactory:function(b){var c=a('<div class="form-group"></div>');c.append(a('<label for="'+b.name+'">'+b.label+"</label>"));for(var d=a('<select class="form-control" name="'+b.name+'"></select>'),e=0,f=b.options.length;f>e;e++)d.append(a('<option value="'+b.options[e][1]+'">'+b.options[e][0]+"</option>"));return c.append(d),d.simplecolorpicker({theme:"glyphicons"}),c}}}(jQuery),function(a){FormDialog.Number={id:"number",fieldFactory:function(b){var c=a('<div class="form-group"></div>');c.append(a('<label for="'+b.name+'">'+b.label+"</label>"));var d=a('<input type="number" class="form-control" name="'+b.name+'"/>');return c.append(d),c}}}(jQuery),function(a){FormDialog.Select={id:"select",fieldFactory:function(b){var c=a('<div class="form-group"></div>');c.append(a('<label for="'+b.name+'">'+b.label+"</label>"));for(var d=a('<select class="form-control" name="'+b.name+'"></select>'),e=0,f=b.options.length;f>e;e++)d.append(a('<option value="'+b.options[e][1]+'">'+b.options[e][0]+"</option>"));return c.append(d),c}}}(jQuery),function(a){FormDialog.Text={id:"text",fieldFactory:function(b){var c=a('<div class="form-group"></div>');c.append(a('<label for="'+b.name+'">'+b.label+"</label>"));var d=a('<input type="text" class="form-control" name="'+b.name+'"/>');return c.append(d),c}}}(jQuery);